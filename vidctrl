#!/bin/env bash

# Ensure playerctl is installed
if ! command -v playerctl &> /dev/null; then
    echo "Error: playerctl is not installed."
    exit 1
fi

# Detect YouTube player process (adjust this if needed)
YT_PLAYER=$(playerctl -l | grep "youtube" | head -n 1)

# Use a fallback if no YouTube player is found
if [[ -z "$YT_PLAYER" ]]; then
    YT_PLAYER="playerctld"
fi

togglepause() {
    playerctl -p "$YT_PLAYER" play-pause
}

next() {
    playerctl -p "$YT_PLAYER" next
}

previous() {
    playerctl -p "$YT_PLAYER" previous
}

forward() {
    playerctl -p "$YT_PLAYER" position 5+
}

backward() {
    playerctl -p "$YT_PLAYER" position 5-
}

# Handle user input
case "$1" in
    --togglepause|-tp) togglepause ;;
    --skip|-s) next ;;
    --previous|-p) previous ;;
    --forward|-f) forward ;;
    --backward|-b) backward ;;
    *)
        echo "Error: $0: Unknown argument '$1'. Use --togglepause|-tp, --skip|-s, --previous|-p, --forward|-f, or --backward|-b."
        exit 1
        ;;
esac
